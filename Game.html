<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie-edge" />
    <title>Document</title>
  </head>
  <body>
    <p id="xps">xp:</p>
    <p id="rocks"></p>

    <canvas
      id="canavasTest"
      width="900"
      height="600"
      style="border: 2px solid #000000"
    >
      Erro seu navegador não suporta canvas ;-;</canvas
    >
    <script>
      var rotate = 0;
      var xp = 1;
      document.getElementById("xps").innerText = xp;
      var img;
      var canavasTest;
      var rock = 0;
      var xp = 1;
      var dx = 2;
      var dy = 1;
      var Sx = 30;
      var Sy = 200;
      var x = 10;
      var y = 500;
      var WIDTH = 2;
      var HEIGHT = 2;
      var imgs
      var test = y, x
      var test2 = Sy, Sx
      function drawStone() {
       imgs = new Image();
        imgs.addEventListener(
          "load",
          function () {
            ctx.drawImage(imgs, Sy, Sx);
          },
          false
        );
        imgs.src =
          "https://images-ext-2.discordapp.net/external/39uA26gBTzIZJe85fS12MPkRRuSKPjZTGtlUtgMerBs/https/media.discordapp.net/attachments/753995440445325312/756487244830736464/stone_2.png";
      }
      function draw() {
        img = new Image();
        img.addEventListener(
          "load",
          function () {
            ctx.drawImage(img, y, x);
          },
          false
        );
        img.src =
          "https://cdn.discordapp.com/attachments/717016373733097544/749346002808602664/body_sprite.png";
      }

      function drawArma() {
        img = new Image();
        img.addEventListener(
          "load",
          function () {
            ctx.drawImage(img, 10, 10);
          },
          false
        );
        img.src =
          "https://cdn.discordapp.com/attachments/717016373733097544/748534649814253579/daggers_1_e.png";
      }
      function efeitoTest1() {
        img = new Image();
        img.addEventListener(
          "load",
          function () {
            ctx.drawImage(img, y, x * 15, 20, 30, 0, 3 * Math.PI * 2);
          },
          false
        );
        img.src =
          "https://cdn.discordapp.com/attachments/717016373733097544/749291334548062311/smoke1.png";
      }

      function efeitoTest2() {
        img = new Image();
        img.addEventListener(
          "load",
          function () {
            ctx.drawImage(img, y, x * 15, 20, 30, 0, 3 * Math.PI * 2);
          },
          false
        );
        img.src =
          "https://media.discordapp.net/attachments/717016373733097544/749291979401199766/smoke2.png";
      }
      function moseTest(e) {
        if (cursor) {
          if ((e.x, e.y)) {
          }
        }
      }
    
      function drawCube() {
        ctx.beginPath();
        ctx.rect(20, 20, 150, 100);
        ctx.stroke();
      }
      function drawHelp(e) {
        ctx.translate(x, y);
        ctx.rotate((100 * Math.PI) / 900);
        console.log(` posição x: ${e.x} posição:y ${e.y}`);
        ctx.translate(x, y);
      }
      function clearscreen() {
        ctx.clearRect(0, 0, canavasTest.width, canavasTest.height);
        var w = canavasTest.width;
        canavasTest.width = 1;
        canavasTest.width = w;
      }
      
      function funcçãoTest() {
        clearscreen();
        draw();
        drawStone()
      }
      function uptade() {
        setInterval(funcçãoTest, 50);
      }
      function addXp() {
        xp += 1;
        console.log(xp);
      }
      function start() {
        canavasTest = document.getElementById("canavasTest");
        ctx = canavasTest.getContext("2d");
        var update = setTimeout(uptade, 25);
        setInterval(update, 15);
        setInterval(setInterval(addXp, 9000), 10);
      }
      function xpss() {
        document.getElementById("xps").innerText = xp;
        if (xp === 10) {
       
         
        }
       
      }
      console.log(xp);
      setInterval(xpss, 1);
      function _rock() {
        img = new Image();
        img.addEventListener(
          "load",
          function () {
            ctx.drawImage(img, y, x);
          },
          false
        );
        img.src =
          "https://cdn.discordapp.com/attachments/717016373733097544/753681412183425035/body_stone.png";
      }
setInterval(rocks, 10)
      function hand() {
        img = new Image();
        img.addEventListener(
          "load",
          function () {
 ctx.drawImage(img, y, x);
          },
          false
        );
        img.src =
          "https://cdn.discordapp.com/attachments/717016373733097544/749346002808602664/body_sprite.png";
      }

      

      window.addEventListener("keydown", (event) => {

        switch (event.keyCode) {
          case 49:

          draw = () => {img = new Image();
        img.addEventListener(
          "load",
          function () {
            ctx.drawImage(img, y, x);
          },
          false
        );
        img.src =
          "https://cdn.discordapp.com/attachments/717016373733097544/749346002808602664/body_sprite.png";
           }
            break;
      
            case 13: 
            var rect1 = {x: Sx, y: Sy, width: 99, height: 99}
 var rect2 = {x: x, y: y, width: 40, height: 40}

	if (rect1.x < rect2.x + rect2.width &&
   rect1.x + rect1.width > rect2.x &&
   rect1.y < rect2.y + rect2.height &&
   rect1.height + rect1.y > rect2.y) {
    document.getElementById("rocks").innerText = rock;
             rock += 1
      
       
          
  }

            break
          case 50:
          if (rock > 1)  {  
    draw = _rock
    }
          
            break;

          case 38:
            x -= dy;
          
            
            break;
            case 32: 
           
           
           
            break; 
          case 40:
            x += HEIGHT;

            break;
          case 37:
            y -= dx;

            break;
          case 39:
            y += WIDTH;

            break;
        }
      });
     
      start()
      function physical_collision() {
 var rect3 = {x: Sx, y: Sy, width: 99, height: 99}
 var rect4 = {x: x, y: y, width: 40, height: 40}

	if (rect3.x < rect4.x + rect4.width &&
  rect3.x + rect3.width > rect4.x &&
  rect3.y < rect4.y + rect4.height &&
  rect3.height + rect3.y > rect4.y) {
   
             y += 2
            x -= 2
          
  }
      }
      setInterval(physical_collision,10)
    </script>

    <style>
      canvas {
        background: wheat;
      }
      body {
        background: gray;
      }
    </style>
  </body>
</html>
